!function(a){function n(){window.ajaxrunning||(window.ajaxrunning=!0,a.ajax({url:ajaxurl,data:{action:"output_single_convert_link"},type:"POST",success:function(n){a(".settings").append(n),window.ajaxrunning=!1}}))}a(document).ready(function(){window.ajaxrunning=!1,a("#simple-webp-images-excluded-html-ob").selectric(),a("body").hasClass("post-type-attachment")&&(a(document).on("DOMSubtreeModified",".media-frame-content",function(){0===a(".convert-image-setting").length&&n()}),a(document).on("click",".attachment",function(){0===a(".convert-image-setting").length&&n()})),a(document).on("click","#swi-convert-single-image",function(n){var e;n.preventDefault(),e=new URLSearchParams(window.location.search).get("item"),a.ajax({url:ajaxurl,data:{action:"convert_single_attachment",attachment_id:e},type:"POST",success:function(n){"Success"===n.data.message&&a("#swi-convert-single-image").text("Converted!")}})}),a(document).on("click","#start-bulk-conversion",function(n){n.preventDefault(),a("#start-bulk-conversion").slideUp(),a(".step-2").slideDown(),a.ajax({type:"POST",url:ajaxurl,data:{action:"get_total_images"},success:function(n){a(".step-2").slideUp();var e=n.data.image_count;a("#total-images").text(e),a(".step-3").slideDown(),window.bulkConvertRunning=!1,window.bulkConvertPage=1,setInterval(function(){!1===window.bulkConvertRunning&&(window.bulkConvertRunning=!0,a.ajax({type:"POST",url:ajaxurl,data:{action:"bulk_convert_images",paged:window.bulkConvertPage},success:function(n){if("All done"==n.data.message)return a(".converting").slideUp(),a(".step-4").slideDown(),!1;var e=parseInt(a("#total-images").text()),t=n.data.message;parseInt(t)>e&&(t=e),"All done"!=t&&a("#remaining-images").text(t),window.bulkConvertRunning=!1,window.bulkConvertPage=parseInt(window.bulkConvertPage)+1}}))},100)}})})})}(jQuery);